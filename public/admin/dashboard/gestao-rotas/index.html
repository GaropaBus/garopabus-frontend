<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>GaropaBus | Gestão de Rotas</title>
    <link rel="stylesheet" href="../../../assets/css/gestao_adm.css" />
    <link rel="stylesheet" href="../../../assets/css/base_adm.css">
  </head>
  <body>
    <nav>
      <a href="../index.html"><button>Voltar</button></a>
    </nav>

    <div class="form-section">
      <div class="title">
        <input type="checkbox" class="toggle" id="addRota-addVariacao" />
        <label for="addRota-addVariacao" class="title-rotas">|</label>
      </div>
      <div class="addRota">
        <form class="inputs">
          <div class="name-rota-div inp">
            <label for="name-rota">Nome da Rota</label>
            <input type="text" id="name-rota" placeholder="Garopaba x Rosa" />
          </div>

          <fieldset>
            <legend>Trajeto da linha</legend>
            <div class="inputs">
              <div>
                <label for="coordenada"
                  >Coordenada (Latitude, Longitude):</label
                >
                <input
                  type="text"
                  id="coordenada"
                  placeholder="Ex: -22.91216, -43.23015"
                />
              </div>

              <div class="submit-button">
                <button type="button" onclick="adicionarParada(event)">
                  Adicionar ponto de trajeto
                </button>
              </div>
            </div>

            <table id="trajetoTable">
              <thead>
                <tr>
                  <th>Ordem</th>
                  <th>Latitude e Longitude</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
              </tbody>
            </table>
          </fieldset>

          <div class="submit-button">
            <button id="addNewRota">Adicionar</button>
          </div>
        </form>
      </div>
      <div class="addVariacao" hidden>
        <form class="inputs">
          <div class="name-rota-div inp">
            <select name="select-rota" id="select-rota">
              <option value="null" disabled selected>
                Selecione uma rota existente
              </option>
              <option value="Garopaba x Rosa">Garopaba x Rosa</option>
            </select>
          </div>

          <div>
            <div id="variacao-details">
              <label for="descricao">Variação</label>
              <input type="text" id="descricao" placeholder="Via ressecada" />
            </div>
          </div>

          <fieldset>
            <legend>Trajeto da linha</legend>
            <div class="inputs">
              <div>
                <label for="coordenada"
                  >Coordenada (Latitude, Longitude):</label
                >
                <input
                  type="text"
                  id="coordenada"
                  placeholder="Ex: -22.91216, -43.23015"
                />
              </div>

              <div class="submit-button">
                <button type="button" onclick="adicionarParada(event)">
                  Adicionar ponto de trajeto
                </button>
              </div>
            </div>

            <table id="trajetoTable">
              <thead>
                <tr>
                  <th>Ordem</th>
                  <th>Latitude e Longitude</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>101</td>
                  <td>-22.91216, -43.23015</td>
                  <td>
                    <button onclick="moverParaCima(event, this)">↑</button>
                    <button onclick="moverParaBaixo(event, this)">↓</button>
                    <button onclick="editarParada(event, this)">✎</button>
                    <button onclick="removerParada(event, this)">✖</button>
                  </td>
                </tr>
                <tr>
                  <td>102</td>
                  <td>-22.91044, -43.22567</td>
                  <td>
                    <button onclick="moverParaCima(event, this)">↑</button>
                    <button onclick="moverParaBaixo(event, this)">↓</button>
                    <button onclick="editarParada(event, this)">✎</button>
                    <button onclick="removerParada(event, this)">✖</button>
                  </td>
                </tr>
                <tr>
                  <td>103</td>
                  <td>-22.90813, -43.22259</td>
                  <td>
                    <button onclick="moverParaCima(event, this)">↑</button>
                    <button onclick="moverParaBaixo(event, this)">↓</button>
                    <button onclick="editarParada(event, this)">✎</button>
                    <button onclick="removerParada(event, this)">✖</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </fieldset>

          <div class="submit-button">
            <button type="submit">Adicionar</button>
          </div>
        </form>
      </div>
    </div>

    <div class="edit-section">
      <h2>Editar Rotas</h2>
      <div id="rota-item">
        <div>
          <div class="item">
            <div class="parada-info">
              <div class="name-item">
                <p><span>Rota: </span><span id="nameRotaDisplay">Garopaba x Rosa</span></p>
                <p>| <span id="variacaoDisplay">Variação: Sem Variação</span></p>
              </div>
            </div>
            <div class="parada-actions">
              <button class="edit-btn" onclick="mostrarFormularioEdicao()">✏️</button>
              <button class="delete-btn">❌</button>
            </div>
          </div>
        
          <!-- Formulário para editar a rota -->
          <div id="editForm" style="display: none;">
            <form class="inputs">
              <div class="name-rota-div inp">
                <label for="edit-name-rota">Nome da Rota</label>
                <input type="text" id="edit-name-rota" placeholder="Garopaba x Rosa" />
              </div>
        
              <fieldset>
                <legend>Trajeto da linha</legend>
                <div class="inputs">
                  <div>
                    <label for="edit-coordenada">Coordenada (Latitude, Longitude):</label>
                    <input type="text" id="edit-coordenada" placeholder="Ex: -22.91216, -43.23015" />
                  </div>
        
                  <div class="submit-button">
                    <button type="button" onclick="adicionarParada(event)">
                      Adicionar ponto de trajeto
                    </button>
                  </div>
                </div>
        
                <table id="edit-trajetoTable">
                  <thead>
                    <tr>
                      <th>Ordem</th>
                      <th>Latitude e Longitude</th>
                      <th>Ações</th>
                    </tr>
                  </thead>
                  <tbody>
                    <!-- Aqui serão adicionados os pontos de trajeto da rota -->
                  </tbody>
                </table>
              </fieldset>
        
              <div class="submit-button">
                <button type="button" onclick="salvarEdicao()">Salvar Alterações</button>
              </div>
            </form>
          </div>
        </div>        
    </div>

    <script type="module" src="../../../assets/js/admin/gestao-rotas.js"></script>
    <script type="module" src="../../../assets/js/admin/tabela-trajeto.js"></script>
  </body>
</html>
